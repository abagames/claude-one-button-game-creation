# TT FENCE (tt_fence)

**タグ**: #rule-surround, #player-bar

## 1. コア・メカニクス

| 項目 | 内容 |
|:---|:---|
| 入力 | タップで現在位置にブロック配置 |
| 挙動 | テトリス風、3マスブロックが自動回転、配置で囲い込み領域を爆発消去、ダメージ管理 |
| 終了条件 | ダメージが100に到達 |
| スコア | 爆発消去数 * sqrt(消去数)、大きな領域囲い込みほど高得点、ダメージ減少効果あり |
| 難易度 | 時間経過でダメージ増加速度、回転速度、配置時ダメージ増加 |

## 2. オブジェクト仕様

| 名前 | 形状 | 動作 | 衝突時 |
|:---|:---|:---|:---|
| block (preview) | box x3 薄青 | 自動回転（30/√√d間隔）、配置可能な角度を探索、7パターン | - |
| block (placed) | box x3 青 | グリッドに固定、囲い込み判定のフェンス役 | - |
| block (overlap) | box x3 紫 | 配置時に既存ブロックと重複、ダメージ+9√d per block | - |
| bomb area | box x多数 赤 | 配置後、外周から到達不可能な領域を検出、爆発アニメーション | 消去で得点、ダメージ減少 |

## 3. デザインガイド分析

| 原則 | 評価 |
|:---|:---|
| (1) シンプルさと直感性 | グリッド配置、色分け（薄青＝次、青＝配置済み、紫＝重複、赤＝爆発）、ダメージバー、囲い込みの視覚化 |
| (2) 視覚的フィードバック | 自動回転アニメーション、爆発拡大演出（sin波サイズ変化）、ダメージバー点滅、得点表示 |
| (3) リスク・リワード | 重複配置でダメージ vs 時間経過ダメージ、大きな領域囲い込みで高得点・ダメージ大幅減少 |
| (4) 斬新なメカニクス | 自動回転システム（配置可能角度探索）、囲い込み検出アルゴリズム（外周からの到達性判定）、ダメージ管理 |

## 4. タグ詳細

| タグ | 役割 | 戦略的意義 |
|:---|:---|:---|
| #rule-surround | 配置後、外周から到達不可能な領域を自動検出、爆発消去で得点（bc*√bc）とダメージ減少（-bc*0.1） | 戦略的囲い込み、フェンス配置計画、大領域狙い vs 小領域連続、パズル的思考要求 |
| #player-bar | ブロックは3マスバー状（直線、L字など7パターン）、角度0-3で回転、自動回転で配置位置移動 | パターン認識と配置計画、回転タイミング読み、限られた形状での囲い込み戦略 |

## 5. 変奏ヒント

| 手法 | アイデア |
|:---|:---|
| Substitute (代用) | 囲い込み領域を資源に変換、消費して特殊ブロック配置、囲い込み vs リソース管理のトレードオフ |
| Combine (結合) | ブロック色を複数種類に分け、同色で囲むとボーナス、色パターン戦略要求 |
| Modify (修正) | 手動回転追加、タップで配置、長押しで回転、精密制御 vs 自動回転のスピード |
