# SQUARE BAR (square_bar)

**タグ**: #rule-geometry, #player-bar, #player-rotate, #on_holding-extend, #on_holding-move

## 1. コア・メカニクス

| 項目 | 内容 |
|:---|:---|
| 入力 | 長押し |
| 挙動 | 正方形の外周を回る棒を操作。ボタン長押しで棒が伸び、敵を捕まえつつゴールドを取得し、スパイクを回避 |
| 終了条件 | 追われている状態で敵に触れる、またはフルサイズのスパイクに触れる |
| スコア | ゴールド取得で multiplier 点。敵を追っている状態で捕まえると 10×multiplier 点と multiplier +1 |
| 難易度 | 時間経過でプレイヤー・敵の移動速度と棒の最大長が増加 |

## 2. オブジェクト仕様

| 名前 | 形状 | 動作 | 衝突時 |
|:---|:---|:---|:---|
| player | bar(可変,3) 緑 | 正方形の外周を自動回転、長押しで伸長 | - |
| enemy | bar(11+√d*4,3) 黄/赤 | 正方形の外周を自動回転、プレイヤーとの位置関係で色変化 | 追われ状態: ゲームオーバー / 追い状態: +10×m点、敵追加 |
| gold | box(0→4) 黄色 | 正方形内部にランダム出現、時間経過でサイズ拡大、時間切れで消失・再配置 | +multiplier点、新たなゴールド出現 |
| spike | box(0→4) 赤色 | 正方形内部にランダム出現、時間経過でサイズ拡大、フルサイズで危険 | サイズ4の時: ゲームオーバー |

## 3. デザインガイド分析

| 原則 | 評価 |
|:---|:---|
| (1) シンプルさと直感性 | 正方形の幾何学的な美しさ。棒の長さ調整だけの簡潔な操作。敵の色（黄色=安全、赤=危険）で状況が一目瞭然 |
| (2) 視覚的フィードバック | 棒の伸縮アニメーション、アイテムの成長過程が視覚的に明確。敵との位置関係による色変化で緊張感を演出 |
| (3) リスク・リワード | 棒を伸ばすと広範囲を取得できるがスパイクに触れるリスクも増大。敵を捕まえると高得点だが追加された敵で難易度上昇 |
| (4) 斬新なメカニクス | 正方形の外周という制約された1次元的な移動空間で、棒の長さという2次元的な要素を操作。追う・追われるの立場逆転が戦略に影響 |

## 4. タグ詳細

| タグ | 役割 | 戦略的意義 |
|:---|:---|:---|
| #rule-geometry | 正方形の外周に沿った移動と、90度の角での方向転換 | 幾何学的な制約により、タイミングと位置取りが明確化。角を利用した戦術が重要 |
| #player-bar | プレイヤーが棒状のオブジェクトとして表現される | 棒の長さが攻撃範囲であり防御範囲でもある。伸ばすタイミングが勝敗を分ける |
| #player-rotate | プレイヤーが正方形の外周を回転移動 | 連続的な回転により、敵との距離感と追いかけっこの展開が生まれる |
| #on_holding-extend | ボタン長押しで棒が伸長 | 押し続けると最大長まで伸び、離すと元に戻る。瞬間的な伸長でアイテムを取る技術が必要 |
| #on_holding-move | ボタン長押しが移動（伸長）に影響 | 伸長することで正方形内部への到達範囲が広がり、実質的な移動範囲の拡張となる |

## 5. 変奏ヒント

| 手法 | アイデア |
|:---|:---|
| Substitute (代用) | 正方形を円形に変え、棒が円周上を回転する「時計の針」ゲームにする |
| Combine (結合) | 正方形の内部にも壁や障害物を配置し、棒の伸長経路に戦略性を持たせる |
| Modify (修正) | 複数の正方形が入れ子状に配置され、棒が内外の正方形を移動できるようにする |
