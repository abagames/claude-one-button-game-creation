# TAPPUMP (tappump)

**タグ**: #on_holding-extend, #on_pressed-flap, #player-circle, #field-auto_scroll

## 1. コア・メカニクス

| 項目 | 内容 |
|:---|:---|
| 入力 | タップでジャンプ、長押しで膨張&浮遊 |
| 挙動 | 横スクロール、プレイヤーは円形で膨張・縮小、コイン回収、スパイク回避 |
| 終了条件 | スパイク接触、または画面上下端に到達 |
| スコア | コイン回収時にプレイヤーの半径分の得点（ceil(radius)）、大きいほど高得点 |
| 難易度 | 時間経過で移動速度、膨張速度、ジャンプ力、重力が増加 |

## 2. オブジェクト仕様

| 名前 | 形状 | 動作 | 衝突時 |
|:---|:---|:---|:---|
| player | arc(radius, 5) 緑 | タップでジャンプ（vel.y -= 2sqrt(d)）、長押しで膨張（rv += 0.08d）、重力適用 | - |
| spike | char("a") 黒 | 右からランダムY座標でスポーン、スクロールで左へ移動 | プレイヤー接触でゲームオーバー |
| coin | char("b") 黒 | 波状の軌道で右から出現（coinY += coinVy, vy反転で画面内往復） | 回収で radius 分の得点 |

## 3. デザインガイド分析

| 原則 | 評価 |
|:---|:---|
| (1) シンプルさと直感性 | 円の拡大縮小、ジャンプの軌道、スパイクとコインの視覚的区別が明確、操作と結果の対応が直感的 |
| (2) 視覚的フィードバック | 膨張時の円サイズ変化、コイン回収スコア表示（半径依存）、スパイク配置でリズム感 |
| (3) リスク・リワード | 膨張でコイン回収範囲拡大＆高得点、ただしスパイク接触リスク増加、タイミング判断が得点に直結 |
| (4) 斬新なメカニクス | 膨張によるサイズと得点の動的変化、長押しで浮力（vel.y -= 0.03 vs -0.12の差）、膨張加速度システム |

## 4. タグ詳細

| タグ | 役割 | 戦略的意義 |
|:---|:---|:---|
| #on_holding-extend | 長押しで半径膨張（rv += 0.08d, radius += rv）、加速度的に拡大、離すと1に収縮 | コイン前で膨張→高得点、スパイク前で縮小→回避、展開タイミングで得点最大化 |
| #on_pressed-flap | タップで上方向速度付与（vel.y -= 2sqrt(d)）、長押し中は浮力（重力-0.03 vs -0.12） | 高度調整、コイン・スパイク配置に合わせた軌道制御、フラップリズムで習熟曲線 |
| #player-circle | 円形プレイヤー（arc）、半径可変（1～無制限）、衝突判定が半径依存 | 膨張で接触面積増加、リスクとリターンの視覚化、サイズ戦略がゲーム性の核心 |
| #field-auto_scroll | 横スクロール（scr = (player.pos.x - 20) * 0.2）、プレイヤー位置依存で加速 | 前進プレッシャー、右に行くほど速度増加、スパイク間隔（40-140）で変動リズム |

## 5. 変奏ヒント

| 手法 | アイデア |
|:---|:---|
| Substitute (代用) | スパイクを押し縮められる壁に変更、膨張で押し返せるが失敗すると圧死、サイズ管理がパズル要素に |
| Combine (結合) | コイン色を複数種類に分け、膨張度で回収可能色が変化、最適サイズ維持でコンボボーナス |
| Modify (修正) | 膨張中に空気消費ゲージ追加、離すとリチャージ、長時間膨張で爆発リスク vs 高得点 |
