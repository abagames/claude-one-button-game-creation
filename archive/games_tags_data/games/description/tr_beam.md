# TR BEAM (tr_beam)

**タグ**: #on_holding-inhale, #obstacle-penalty, #rule-physics, #player-reciprocate, #obstacle-well_up

## 1. コア・メカニクス

| 項目 | 内容 |
|:---|:---|
| 入力 | 長押しでトラクタービーム展開 |
| 挙動 | UFOが左右往復、ビームでボール引き寄せ、黒ボール回収で得点、赤ボール回避 |
| 終了条件 | 赤ボールがUFOに接触 |
| スコア | 黒ボール回収でマルチプライヤースコア（連続回収で増加）、タップでリセット |
| 難易度 | 時間経過でUFO移動速度、ボール出現頻度、ビーム伸長速度、ボール速度が増加 |

## 2. オブジェクト仕様

| 名前 | 形状 | 動作 | 衝突時 |
|:---|:---|:---|:---|
| ufo | char("a","b") 黒 | sin波で左右往復（x = sin(angle)*40+50, angle += 0.03√d） | 黒ボール：得点、赤ボール：ゲームオーバー |
| tractor beam | line(2,4本) 青/シアン | 長押しで下方向に伸長（max 82）、離すと縮小（0.2減衰） | ボール引き寄せ |
| ball (black) | arc 黒 | 下から湧き上がり（y>99で減速）、重力0.1√d、ボール同士反発 | UFO接触：multiplier得点、ビーム：引き寄せ |
| ball (red) | arc 赤 | 同上、画面端到達で黒化、中央エリア通過で赤化 | UFO接触：死亡、ビーム：引き寄せ＋音 |

## 3. デザインガイド分析

| 原則 | 評価 |
|:---|:---|
| (1) シンプルさと直感性 | UFOの往復移動、ビームの視覚的引力、色分け（黒＝安全、赤＝危険）、ボールの物理的動き |
| (2) 視覚的フィードバック | ビーム展開のアニメーション、ボール引き寄せの軌道変化、色変化、マルチプライヤー表示 |
| (3) リスク・リワード | 赤ボール引き寄せで黒化狙い vs 接触リスク、長押しで広範囲カバー vs 位置固定、マルチプライヤー維持 |
| (4) 斬新なメカニクス | 赤ボールの条件付き色変化（端で黒化、中央エリアで赤化）、トラクタービームの物理的引力 |

## 4. タグ詳細

| タグ | 役割 | 戦略的意義 |
|:---|:---|:---|
| #on_holding-inhale | 長押しでビーム伸長（+= 2d, max 82）、離すと縮小（*= 0.8～0.4）、ボールを上方向に引き寄せ | 引き寄せ範囲とタイミング制御、長押しで広範囲 vs 短押しで精密狙い、位置予測で効率化 |
| #obstacle-penalty | 赤ボールがUFO接触で即死、トラクタービームで引き寄せも可能、誤操作で自滅リスク | 赤ボール識別と回避、引き寄せ vs 無視の判断、色変化タイミング読み |
| #rule-physics | ボール同士反発（距離<0で力加算）、重力・慣性・減衰、画面端/上端で特殊挙動 | 物理予測で引き寄せ効率化、ボール密集の連鎖反応、複雑な軌道計算 |
| #player-reciprocate | UFOがsin波で往復（振幅40, 中心50）、angle += 0.03√d、プレイヤー制御不可 | 位置タイミング読み、往復周期とボール出現の同期、ビーム展開タイミング最適化 |
| #obstacle-well_up | ボールが下から湧き上がり（y>99で上向き減速）、中央エリア（10,12+r,80,5）通過で赤化 | 湧き上がりパターン予測、中央エリア回避 vs 通過後引き寄せ、エリア認識が重要 |

## 5. 変奏ヒント

| 手法 | アイデア |
|:---|:---|
| Substitute (代用) | トラクタービームを押し出しビームに変更、赤ボールを画面端に押し出して黒化、反発力管理 |
| Combine (結合) | ボールサイズで得点倍率変化、小ボール＝高倍率、大ボール＝低倍率、サイズ選択戦略 |
| Modify (修正) | ビーム角度を長押し時間で変化、垂直→斜め、広範囲カバー vs 精密引き寄せのトレードオフ |
