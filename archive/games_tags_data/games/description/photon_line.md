# PHOTON LINE (photon_line)

**タグ**: #rule-match, #on_holding-rotate, #field-1D

## 1. コア・メカニクス

| 項目 | 内容 |
|:---|:---|
| 入力 | 押す（180°回転開始）/ 長押し（回転継続） |
| 挙動 | 中央のプレイヤーが2つの手（左右）を持ち、左右から飛んでくる色付きフォトン（2-4色）をキャッチして手に追加。上部に表示される目標パターンと両手の色パターンが一致すると次のステップへ |
| 終了条件 | 左右の壁がプレイヤーに到達 |
| スコア | ステップクリアでworld点、壁が遠いほど高得点 |
| 難易度 | difficultyに応じてフォトンの速度と出現頻度が増加、worldが進むと色数と目標パターンの複雑さが増加 |

## 2. オブジェクト仕様

| 名前 | 形状 | 動作 | 衝突時 |
|:---|:---|:---|:---|
| player | char(a) + 2つの手 | 中央に固定、180°回転可能、回転中は反射モード | - |
| photons | char(b-e, 4色) | 左右から飛来、プレイヤーの手に追加される | 通常時はキャッチ、回転中は反射（速度5倍で跳ね返る） |
| black_photons | char(f, 黒) | 左右から飛来、プレイヤーの手から1つ削除 | キャッチで手の末尾を削除 |
| target | char(b-e, 上部表示) | 目標パターン、両手の色配列を一致させる必要がある | - |
| walls | rect(gray) | 左右から迫る壁、時間経過で接近 | プレイヤーに到達で終了 |

## 3. デザインガイド分析

| 原則 | 評価 |
|:---|:---|
| (1) シンプルさと直感性 | 色のマッチングというシンプルなルール、目標パターンと現在の手を視覚的に比較可能 |
| (2) 視覚的フィードバック | マッチ成功/失敗の効果音、パターンの視覚的比較、壁の接近で緊張感を視覚化 |
| (3) リスク・リワード | 回転中は反射できるがパターンを合わせられない。黒いフォトンを回避するか、手を減らすか選択 |
| (4) 斬新なメカニクス | 色マッチング+180°回転+2つの手の同時管理。回転によって左右の手の役割が入れ替わる独特の仕組み |

## 4. タグ詳細

| タグ | 役割 | 戦略的意義 |
|:---|:---|:---|
| #rule-match | 目標パターンと両手の色配列を一致させる必要がある | どのフォトンをどちらの手でキャッチするか、回転のタイミングはいつかを計画する必要がある |
| #on_holding-rotate | ボタンを押すと180°回転開始、長押しで回転継続 | 回転中はフォトンを反射できるが、パターンを合わせるには回転を止める必要がある。回転によって左右の手が入れ替わる |
| #field-1D | 横1本の線上でフォトンが左右から飛来 | 左右のフォトンの流れを同時に管理し、両手に適切な色を配置する必要がある |

## 5. 変奏ヒント

| 手法 | アイデア |
|:---|:---|
| Substitute (代用) | 色を数字や図形に置き換え、数式や図形パターンのマッチングに変化させる |
| Combine (結合) | 3つ以上の手を追加し、より複雑なパターンマッチングを要求する |
| Modify (修正) | 回転角度を90°や360°に変更し、より多様な手の配置を可能にする |
