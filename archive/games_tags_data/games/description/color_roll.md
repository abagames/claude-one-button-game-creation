# COLOR ROLL (color_roll)

**タグ**: on_pressed-pierce, rule-match

## 1. コア・メカニクス

| 項目 | 内容 |
|:---|:---|
| 入力 | 押す |
| 挙動 | 縦方向にショットを発射、最初にヒットした色と同じ色のバーを貫通して消す |
| 終了条件 | レーンが画面下（y>97）を超える |
| スコア | バー消去で倍率×2^基本倍率の得点、連続同色で倍率×2、異なる色でペナルティ |
| 難易度 | レーンセット完了でレーン数+1（最大10）、基本倍率+1（最大9）、スクロール速度増加 |

## 2. オブジェクト仕様

| 名前 | 形状 | 動作 | 衝突時 |
|:---|:---|:---|:---|
| shot | rect(3, height) 黒→色 | 画面下から上へ移動（3×√difficulty）、最初のヒットで色変化 | - |
| lane | rect(幅可変, 7) 4色 | 1-4色のバーで構成、左右スクロール（0.5-1×√difficulty）、下方向に移動 | - |
| bar | rect(幅可変, 7) 赤/緑/青/黄 | レーンの構成要素、幅は99/色数×0.8-1.2のランダム | 同色で消去、異色でショット消滅 |

## 3. デザインガイド分析

| 原則 | 評価 |
|:---|:---|
| (1) シンプルさと直感性 | 4色のマッチングルール、射撃という直感的な操作、レーンの視覚的構成 |
| (2) 視覚的フィードバック | ショットの色変化、バー消去のパーティクル、倍率表示、レーンの下降 |
| (3) リスク・リワード | タイミングを狙って連続同色消去で高倍率、誤射でペナルティ、レーン下降加速 |
| (4) 斬新なメカニクス | ショットの色変化と貫通（pierce）、レーンの構成要素が動的変化（1-4色）、ペナルティによる下降加速 |

## 4. タグ詳細

| タグ | 役割 | 戦略的意義 |
|:---|:---|:---|
| on_pressed-pierce | ショット発射、最初のヒット色と同じ色を貫通、レーン単位で消去 | 色選択の戦略性、貫通による連鎖消去、タイミングの精密制御 |
| rule-match | 同じ色のバーのみ貫通、異なる色でショット消滅＋ペナルティ（下降加速） | 色マッチングの判断、レーン構成の分析、連続同色による倍率管理 |

## 5. 変奏ヒント

| 手法 | アイデア |
|:---|:---|
| Substitute (代用) | 色を数字や形に変更 / ショットの方向を横方向に変更 |
| Combine (結合) | 複数のショットを同時発射 / レーンの種類を増やして特殊効果を追加 |
| Modify (修正) | 色数を増やして難易度アップ / ペナルティの強度を調整 / レーン構成のパターンをより戦略的に |
